{% extends "base.html" %}
{% block title %}Phân quyền user {{ user_id }}{% endblock %}
{% block content %}
<div class="container mt-4">
  <h3>Phân quyền cho User: <b>{{ user_id }}</b></h3>
  <form method="post">
    {% for tool in tools %}
      <h5 class="mt-3">{{ tool.tool_name }} ({{ tool.tool_id }})</h5>
      <div class="row mb-3">
        {% for p in permissions_by_tool[tool.tool_id] %}
        <div class="col-md-3 form-check">
          <input class="form-check-input" type="checkbox" name="perms" id="perm-{{ p.permission_id }}" value="{{ p.permission_id }}"
            {% if p.permission_id in has_perms %}checked{% endif %}>
          <label class="form-check-label" for="perm-{{ p.permission_id }}">
            {{ p.permission_name }} <small class="text-muted">({{ p.permission_id }})</small>
          </label>
        </div>
        {% endfor %}
      </div>
    {% endfor %}
    <button class="btn btn-primary mt-3" type="submit">Lưu quyền</button>
    <a class="btn btn-secondary mt-3" href="{{ url_for('admin_list_users') }}">Quay lại</a>
  </form>
</div>
{% endblock %}